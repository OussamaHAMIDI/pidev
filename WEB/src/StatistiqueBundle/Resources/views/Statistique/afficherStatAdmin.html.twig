{% extends "@Souk/layout.html.twig" %}


{% block title %}
    <div class="section-title">
        <h2 class="title">
            Statistiques
        </h2>
    </div>
{% endblock title %}

{% block body %}
    <html>

    <div class="col" style="padding-right: 7%; padding-left: 7%; padding-bottom: 10%">
        <div class="product-tab">
            <ul class="tab-nav">
                <li class="active"><a data-toggle="tab" href="#tab1">Boutiques</a></li>
                <li><a data-toggle="tab" href="#tab2">Produits</a></li>
                <li><a data-toggle="tab" href="#tab3">Utilisateurs</a></li>
                <li><a data-toggle="tab" href="#tab4">Vente</a></li>
            </ul>
            <div class="tab-content">
                <div id="tab1" class="tab-pane fade in active">
                    <p> Top Ten boutiques </p>


                    <div class="section">
                        <!-- container -->
                        <div class="container">
                            <!-- row -->
                            <div class="row">
                                <div class="col-md-11">
                                    <div id="container">
                                        <div class="col-md-10 col-md-offset-1">
                                            <div id="chartBoutique" style="min-width: 400px; height: 400px; margin: 0 auto">
                                                <script src="{{ asset('js/jquery.min.js') }}" type="text/javascript"></script>
                                                <script src="http://code.highcharts.com/4.0.1/highcharts.js"></script>
                                                <script src="http://code.highcharts.com/4.0.1/modules/exporting.js"></script>
                                                <script type="text/javascript">
                                                    {{ chart(chart) }}
                                                </script>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <table>
                        <tr>
                            <th>Note</th>
                            <th>date creation</th>
                            <th>Nom</th>
                        </tr>
                        {% set b = 0 %}
                        {% set p = 0 %}
                        {% for e in evaluations %}
                            {% if (b <3) and (e.idBoutique != null) %}
                                <tr>
                                    <td>
                                        {% set b = b + 1 %}
                                        {{ e.note }}
                                        {% spaceless %}
                                            <div class="product">
                                                <div class="product-rating">
                                                    {% if (e.note)!=0 %}
                                                        {% for i in 1..e.note %}
                                                            <i class="fa fa-star"></i>
                                                        {% endfor %}
                                                    {% endif %}
                                                    {% if (5 - e.note != 0 ) %}
                                                        {% for j in 1..(5 - e.note) %}
                                                            <i class="fa fa-star empty"></i>
                                                        {% endfor %}
                                                    {% endif %}
                                                </div>
                                            </div>
                                        {% endspaceless %}
                                    </td>
                                    <td>
                                        {{ e.dateCreation|date('y/m/d') }}
                                    </td>
                                    <td>
                                        {{ e.idBoutique ? e.idBoutique.nom : '' }}
                                    </td>
                                </tr>
                            {% endif %}
                        {% endfor %}
                    </table>

                </div>
                <div id="tab2" class="tab-pane fade in col-md-offset-1 col-md-10">
                    <p><strong> Top Ten Produits </strong></p>
                    <table>
                        <tr>
                            <th>Note</th>
                            <th>date creation</th>
                            <th>Nom</th>
                        </tr>
                        {% set b = 0 %}
                        {% set p = 0 %}
                        {% for e in evaluations %}
                            {% if (b <3) and (e.idBoutique != null) %}
                                <tr>
                                    <td>
                                        {% set b = b + 1 %}
                                        {{ e.note }}
                                        {% spaceless %}
                                            <div class="product">
                                                <div class="product-rating">
                                                    {% if (e.note)!=0 %}
                                                        {% for i in 1..e.note %}
                                                            <i class="fa fa-star"></i>
                                                        {% endfor %}
                                                    {% endif %}
                                                    {% if (5 - e.note != 0 ) %}
                                                        {% for j in 1..(5 - e.note) %}
                                                            <i class="fa fa-star empty"></i>
                                                        {% endfor %}
                                                    {% endif %}
                                                </div>
                                            </div>
                                        {% endspaceless %}
                                    </td>
                                    <td>
                                        {{ e.dateCreation|date('y/m/d') }}
                                    </td>
                                    <td>
                                        {{ e.idBoutique ? e.idBoutique.nom : '' }}
                                    </td>
                                </tr>
                            {% endif %}
                        {% endfor %}
                    </table>
                </div>
                <div id="tab3" class="tab-pane fade in col-md-offset-1 col-md-10">
                    <p><strong> Utilisateurs </strong></p>
                </div>
                <div id="tab4" class="tab-pane fade in col-md-offset-1 col-md-10">
                    <p><strong> Vente </strong></p>
                </div>
            </div>
        </div>
    </div>


    {#<div class="section" style="padding: 20px;">#}
    {#<div class="row">#}
    {#<div class="col-md-10 col-md-offset-1">#}
    {#<div class="section-title">#}
    {#<h2 class="title">#}
    {#Mes tombolas#}
    {#</h2>#}
    {#</div>#}
    {#</div>#}
    {#</div>#}
    {#<!-- section -->#}
    {#<div class="section">#}
    {#<!-- container -->#}
    {#<div class="container">#}
    {#<!-- row -->#}
    {#<div class="row">#}
    {#<div class="col-md-11">#}
    {#<div id="container">#}
    {#<div class="col-md-10 col-md-offset-1">#}
    {#<div id="linechart" style="min-width: 400px; height: 400px; margin: 0 auto">#}
    {#<script src="{{ asset('js/jquery.min.js') }}" type="text/javascript"></script>#}
    {#<script src="http://code.highcharts.com/4.0.1/highcharts.js"></script>#}
    {#<script src="http://code.highcharts.com/4.0.1/modules/exporting.js"></script>#}
    {#<script type="text/javascript">#}
    {#{{ chart(chart) }}#}
    {#</script>#}
    {#</div>#}

    {#</div>#}
    {#</div>#}
    {#</div>#}
    {#</div>#}
    {#<!-- /row -->#}
    {#</div>#}
    {#<!-- /container -->#}
    {#</div>#}
    {#<!-- /section -->#}


    {#</div>#}
    {#<!-- /container -->#}


    </html>
{% endblock body %}




    {#{% block javascripts %}#}
        {#<script>#}
        {#Push.create("Hola mundo");#}
        {#</script>#}
        {#<script>#}
            {#$('.alert_supp').confirm({#}
                {#title: 'Suppression',#}
                {#content: 'Voulez-vous vraiment supprimer cette tombola ?',#}
                {#type: 'red',#}
                {#typeAnimated: true,#}
                {#boxWidth: '300px',#}
                {#theme: 'modern',#}
                {#draggable: true,#}
                {#useBootstrap: true,#}
                {#backgroundDismiss: false,#}
                {#backgroundDismissAnimation: 'glow',#}
                {#buttons: {#}
                    {#Oui: {#}
                        {#text: 'Oui',#}
                        {#btnClass: 'btn-red',#}
                        {#action: function () {#}
                            {#location.href = this.$target.attr('href');#}
                        {#}#}
                    {#},#}
                    {#Non: {#}
                        {#text: 'Non',#}
                        {#action: function () {#}
                        {#}#}
                    {#}#}
                {#}#}
            {#});#}
        {#</script>#}
        {#<script>#}
            {#var searchField = $('#keyword');#}
            {#var tombola_div = $('#result');#}
            {#var delay = (function () {#}
                {#var timer = 0;#}
                {#return function (callback, ms) {#}
                    {#clearTimeout(timer);#}
                    {#timer = setTimeout(callback, ms);#}
                {#};#}
            {#})();#}
            {#searchField.keyup(function (evt) {#}

                {#var array = {'key': searchField.val()};#}

                {#delay(function () {#}
                    {#$.ajax({#}
                        {#url: '{{ path('rechercheAJAX_tombola') }}',#}
                        {#method: "POST",#}
                        {#data: array,#}
                        {#dataType: 'html',#}
                        {#success: function (result) {#}
                            {#var parsedData = result;#}
                            {#tombola_div.fadeOut(function () {#}
                                {#tombola_div.empty();#}
                                {#tombola_div.html(parsedData).fadeIn();#}
                            {#});#}
                        {#}#}
                    {#});#}
                {#}, 100);#}
            {#});#}
        {#</script>#}
    {#{% endblock javascripts %}#}
